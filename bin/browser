#!/usr/bin/env bash

if [ "$1" != "" ]; then
	opt=$1
	shift
else
	. $HOME/.config/browser.conf &>/dev/null
	[ -n "${BROWSER}" ] && opt=${BROWSER} || opt=""
fi

case "$opt" in
	chromium)
		if [ -e /usr/bin/chromium ]; then
			exec /usr/bin/chromium $*
		else
			echo "Chromium is not installed" | dmenu -i -p "Error"
		fi
	;;
	brave)
		if [ -e /usr/bin/brave ]; then
			exec /usr/bin/brave $*
		else
			echo "Brave is not installed" | dmenu -i -p "Error"
		fi

	;;
	firefox)
		if [ -e /usr/bin/firefox ]; then
			exec /usr/bin/firefox $*
		else
			echo "Firefox is not installed" | dmenu -i -p "Error"
		fi

	;;
	chrome)
		if [ -e /usr/bin/google-chrome-stable ]; then
			exec /usr/bin/google-chrome-stable $*
		else
			echo "Chrome is not installed" | dmenu -i -p "Error"
		fi
	;;
	*)
		opt=$(printf "chromium\nbrave\nfirefox\nchrome\n" | dmenu -p "Select the browser you want to use (depends on availability)")
		echo "BROWSER=$opt" > $HOME/.config/browser.conf
		exec ${0} ${opt}
	;;
esac
